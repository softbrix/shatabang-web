/*jshint node:true*/
module.exports = function(app) {
  var express = require('express');
  var imageGenerator = require('sjotorp_image');
  var listRouter = express.Router();


  listRouter.get('/list', function(req, res) {
    res.send([{"i":"679916948177AC9F","b":"965e6e22-51ed-493c-b35c-c4956cbedb02","s":336.9486719900041,"k":"2005/06/22/214834.jpg"},{"i":"70AA4C9F23332EEF","b":"91ab8010-e222-43ff-8122-24396a19a0c6","s":208.41024479000728,"k":"2005/06/22/215445.jpg"},{"i":"BACC7CFA06CD0911","b":"25711a81-7b79-4a4b-999e-583c025c3456","s":40.57228927861857,"k":"2005/06/22/215445.jpg"},{"i":"913364CC1F992A22","b":"27dfb19e-dee5-496e-adb9-67de561f2dde","s":206.07093776000076,"k":"2005/06/22/215445.jpg"},{"i":"38AA7AAA24EF313E","b":"cdb71c3b-ba41-421c-9df1-4a7f7ef3c482","s":238.39735550999762,"k":"2005/06/22/215445.jpg"},{"i":"54AA5CCC21112C17","b":"4072728c-74a7-4f7f-bdb4-b783ca499ceb","s":226.15558399999807,"k":"2005/06/22/215445.jpg"},{"i":"797745B02C663B33","b":"bd488416-b191-4eba-89a0-e7196e8dd04a","s":65.85073103999983,"k":"2005/06/22/215422.jpg"},{"i":"55334E0B2422302D","b":"3c360009-c152-429c-8088-c82574205582","s":51.16743003999892,"k":"2005/06/22/215422.jpg"},{"i":"5D112FD23FBB54FA","b":"284684e9-ef99-4173-8b40-8181f368ebea","s":190.06619984000085,"k":"2005/06/22/214540.JPG"},{"i":"5BDE14CD0CAB10E3","b":"d6e9bb23-6a1e-4c25-9029-43cfc3b6d499","s":24.219597750170813,"k":"2005/06/22/214540.JPG"},{"i":"5511182D0A220D83","b":"af5fc410-3c3a-491e-8559-a88daa455e8f","s":27.88016054468384,"k":"2005/06/22/214540.JPG"},{"i":"5B5548004844605B","b":"594af9a2-d7a9-46ca-ad23-945ec8e10771","s":1123.6093459099975,"k":"2005/06/22/214525.JPG"},{"i":"B3BB5F1C24003000","b":"415bb6a8-558c-49b6-9618-becd53cef52c","s":173.8730694400086,"k":"2005/06/22/214108.jpg"},{"i":"60CC558309BC0CFA","b":"0017d1a0-a554-4272-acfb-0a9be291c17c","s":6.416010766300739,"k":"2005/06/22/214108.jpg"},{"i":"94EE84FA09330C44","b":"1a7bf031-caa9-4f31-95bf-43dc241612fb","s":113.08977421525952,"k":"2005/06/22/213706.jpg"},{"i":"73336CFA1C4425B0","b":"29ecdb08-3542-4907-a680-bbda1f495999","s":371.93805510999846,"k":"2005/06/22/213706.jpg"},{"i":"8977108809DE0D28","b":"ae86a7d8-848d-4e21-8cbe-1b18c562d93b","s":180.60489987253,"k":"2005/06/22/213500.jpg"},{"i":"BDFFE9C608000AAB","b":"2c8cf8eb-5067-4ecf-8379-a999b360daea","s":113.88803819444611,"k":"2005/06/22/213500.jpg"},{"i":"D2883FA506000800","b":"4cd8eab2-d3db-41c5-b0d5-1f181a904226","s":474.4623807346438,"k":"2005/06/22/213132.jpg"},{"i":"66EF31990A220D83","b":"a40c438a-3dcc-4b7e-9ec2-1dc97c7f7d27","s":54.639940512272986,"k":"2005/06/22/211932.JPG"},{"i":"6C441D5549DE627D","b":"28125998-8f69-4a1e-8179-ffce0255ba93","s":370.98919996000177,"k":"2005/06/22/211319.JPG"},{"i":"30221A7D4D77674A","b":"27567e28-3a70-4798-902e-b394ae8373bc","s":347.1722695100023,"k":"2005/06/22/211312.JPG"},{"i":"81333E6644CD5BBB","b":"6baa92a1-5477-4943-9169-865f5978af54","s":311.8214927100034,"k":"2005/06/22/211312.JPG"},{"i":"1E2298880622082D","b":"558cb68a-a106-4155-8944-2ca4538e8fcf","s":49.68877036424241,"k":"2005/06/22/211312.JPG"}]).end();
  });

  listRouter.get('/face/:id', function(req, res) {
    var color = imageGenerator.generateColor(req.params.id);
    imageGenerator.generateImage(100, 100, color, function(err, img) {
        res.contentType('image/jpeg');
        res.end(img.data);
    });
  });

  app.use('/api/faces', listRouter);
};
